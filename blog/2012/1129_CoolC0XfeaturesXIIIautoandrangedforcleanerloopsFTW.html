<!DOCTYPE html>
<html>
<head>

<link rel="icon" href="/favicon.ico" type="image/x-icon"/>
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
<title>Cool C++0X features XIII: auto and ranged for, cleaner loops FTW Nico Brailovsky's thought repository</title>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/style.css">
</head>

<body>

<div id="siteheader">
  <h1>Nico Brailovsky's thought repository</h1>

<div class="nav tabs is-full">
  <a class="is-center" href="/blog/index.html">Blog</a>
  <a class="is-center"
     href="https://github.com/search?type=code&q=repo%3Anicolasbrailo%2Fnicolasbrailo.github.io%20"
     onclick="togglesearch(); return false">Site search</a>
  <a class="is-center" href="/blog/projects_texts">Projects & Texts</a>
  <a class="is-center" href="/blog/history.html">Archive</a>
  <a class="is-center" href="/blog/aboutme.html">About</a>
</div>

<form id="sitesearch" class="nav tabs is-full is-hidden">
  <input type="text" id="sitesearch_q"/>
  <button type="submit">Search</button>
</form>

</div>

<div id="content" class="language-clike">
<h2 name="coolc0xfeaturesxiiiautoandrangedforcleanerloopsftw">Cool C++0X features XIII: auto and ranged for, cleaner loops FTW</h2>

<div class="post_metadata">
Post by Nico Brailovsky @ 2012-11-29 |
  <a href="/blog/2012/1129_CoolC0XfeaturesXIIIautoandrangedforcleanerloopsFTW.html">Permalink</a>  |
  <a href="https://github.com/nicolasbrailo/nicolasbrailo.github.io/issues/new?title=Comment@md_blog/2012/1129_CoolC0XfeaturesXIIIautoandrangedforcleanerloopsFTW.md&body=I%20have%20a%20comment!">Leave a comment</a>
</div>

<div class="post">
<p>Long time without updating this series. Last time we saw how the ugly</p>
<pre lang="c++"><code class="language-c++" lang="c++">for (FooContainer::const_iterator i = foobar.begin(); i != foobar.end(); ++i)
</code></pre>
<p>could be transformed into the much cleaner</p>
<pre lang="c++"><code class="language-c++" lang="c++">for (auto i = foobar.begin(); i != foobar.end(); ++i)
</code></pre>
<p>Yet we are not done, we can clean that a lot more using for range statements.</p>
<p>Ranged for is basically syntactic sugar (no flamewar intended) for shorter for statements. It's nothing new and it's been part of many languages for many years already, so there will be no lores about the greatness of C++ innovations (flamewar intended), but it still is a nice improvement to have, considering how tedious can be to write nested loops. This certainly looks much cleaner:</p>
<pre lang="c++"><code class="language-c++" lang="c++">for (auto x : foobar)
</code></pre>
<p>This last for-statement, even though it looks good enough to print and hang in a wall, raises a lot of questions. What's the type of x? What if I want to change its value? Let's try to answer that.</p>
<p>The type of the iterator will be the same as the type of the vector, so in this case x would be an int:</p>
<pre lang="c++"><code class="language-c++" lang="c++">std::vector foobar;
for (auto x : foobar) {
    std::cout &lt;&lt; (x+2);
}
</code></pre>
<p>And now, what happens if you want to alter the contents of a list and not only display them? That's easy too, just declare x as an auto reference:</p>
<pre lang="c++"><code class="language-c++" lang="c++">std::vector foobar;
for (auto&amp; x : foobar) {
    std::cout &lt;&lt; (x+2);
}
</code></pre>
<p>This looks really nice but it won't really do anything, for two different reasons:</p>
<ul>
<li>Ranged fors won't work until g++ 4.5.6 is released</li>
<li>The list is empty!</li>
</ul>
<p>There are many ways to initialize that list, but we'll see how C++0X let's you do it in a new way the next time.</p>
</div>

<div class="post_comments">

</div>

</div>

<div id="sitefooter">
   |
  <a href="/blog/history.html">Archive</a> |
  <a href="/blog/rss.xml">RSS</a>
</div>

<script src="/search.js"></script>
<script src="/codehighlight.js"></script>

</body>
</html>
