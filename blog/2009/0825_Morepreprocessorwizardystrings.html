<p><link rel="stylesheet" href="https://unpkg.com/chota@latest"></p>
<h1>Nico Brailovsky's blog<a name="nicobrailovskysblog"></a></h1>
<h1>Menu<a name="menu"></a></h1>
<ul>
<li><a href="/">Home</a></li>
<li><a href="/blog/index.html">Blog</a></li>
<li><a href="/blog/history.html">History</a></li>
</ul>
<h1>More preprocessor wizardy: strings<a name="morepreprocessorwizardystrings"></a></h1>
<p>No preprocesor wizard should go out of his house without the always useful string maker. Let's say you're trying to create a class with some sort of pseudo type-system (*):</p>
<pre lang="c++"><code lang="c++">class FooBar {
   public:
   const char* get_name(){ return "FooBar"; }
};
</code></pre>
<p>Why would you type ALL that when you can make a simple macro, MK_CLASS, like this:</p>
<pre lang="c++"><code lang="c++">MK_CLASS( FooBar )
   /<em> Other methods </em>/
};
</code></pre>
<p>Problem is, this will only print "Name":</p>
<pre lang="c++"><code lang="c++">#define MK_CLASS( Name )
      class Name { public:
            const char *get_name(){ return "Name"; }
</code></pre>
<p>Well, it's an easy fix, just prepend # to your string, like this:</p>
<pre lang="c++"><code lang="c++">#define MK_CLASS( Name )
      class Name { public:
            const char *get_name(){ return #Name; }
</code></pre>
<p>Or use this nice string maker:</p>
<pre lang="c++"><code lang="c++">#define MK_STR(str) #str
</code></pre>
<p>As usual, use the preprocesor at your own risk.</p>
<p>(*) Yeah, I know, OO purists will try to beat me to death for this, but it actually has some uses. I've found it to be a specially good solution when working with low level protocols.</p>
<hr />
<p>Post by Nico Brailovsky @ 2009-08-25 -
    <a href="/blog/2009/0825_Morepreprocessorwizardystrings.html">Permalink</a> -
    <a href="https://github.com/nicolasbrailo/nicolasbrailo.github.io/issues/new?title=Comment@/blog_md/2009/0825_Morepreprocessorwizardystrings.md&amp;body=I%20have%20a%20comment!">Leave a comment</a></p>