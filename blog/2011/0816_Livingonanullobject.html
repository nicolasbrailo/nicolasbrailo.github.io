<p><link rel="stylesheet" href="https://unpkg.com/chota@latest"></p>
<h1>Nico Brailovsky's blog<a name="nicobrailovskysblog"></a></h1>
<h1>Menu<a name="menu"></a></h1>
<ul>
<li><a href="/">Home</a></li>
<li><a href="/blog/index.html">Blog</a></li>
<li><a href="/blog/history.html">History</a></li>
</ul>
<h1>Living on a null object<a name="livingonanullobject"></a></h1>
<p>Check this out:</p>
<pre lang="c++"><code lang="c++">struct S {
   int f(){ return 42; }
};
int main() {
   S <em>x = (S</em>) NULL;
   return x-&gt;f();
}
</code></pre>
<p>What does this do? Does it compile? Does it crash? I'll give you a second.</p>
<p>Ready? It does compile, OK</p>
<p>But it doesn't crash.</p>
<p>Why, you may ask</p>
<p>Think about it, you must.</p>
<p>The compiler will mangle S::f and translate this into something like:</p>
<pre lang="c++"><code lang="c++">struct S {};
int mangled_S_f(struct S <em>this){
   return 42;
}
int main() {
   S </em>x = (S*) NULL;
   mangled_S_f(x);
}
</code></pre>
<p>Now, in this new "translated" code, what do you think? Will it crash? It won't, since no one is going to dereference "this". Crazy, huh? This crazy idiom also allows even crazier things, like <a href="/blog/2011/0404_NewsflashCobjectcommitssepuku.html">C++ objects committing sepuku</a></p>
<hr />
<p>Post by Nico Brailovsky @ 2011-08-16 -
    <a href="/blog/2011/0816_Livingonanullobject.html">Permalink</a> -
    <a href="https://github.com/nicolasbrailo/nicolasbrailo.github.io/issues/new?title=Comment@/blog_md/2011/0816_Livingonanullobject.md&amp;body=I%20have%20a%20comment!">Leave a comment</a></p>