<h1>Template metaprogramming XI: Hidden Agenda<a name="templatemetaprogrammingxihiddenagenda"></a></h1>
<p>Wow, number eleven already. We&rsquo;re getting more chapters here than Final Fantasy games. I didn&rsquo;t even imagine there was so much to write about such an esoteric language features like templates. I do wonder if anyone will actually read it, but that&rsquo;s a completely different problem.</p>
<p>Enough meta-meta talk: what can we do with all the things we have learned? We can calculate pi and e, we already showed that as an example on one of the first chapters. This chapter I&rsquo;m going to write about what motivated me to explore the bizarre underworld of template metaprogramming. Some time ago I had to <a href="/search?q=Berkeley">work with a Berkeley DB</a> researching the feasibility of developing a magic cache for (real) DB table. Leaving aside the discussion of whether this is a good idea (the project did have a good reason to be researched) I hit a major roadblock when trying to provide a fa√ßade for every table; something like this:</p>
<p><img alt="" src="/blog_img/virtualtemplate.png" />
See the problem? To do something like that we&rsquo;d need a <a href="/blog/2009/0803_CMagiccallbackssolved.html">virtual template method</a>, and you can&rsquo;t have that. After seeing that I thought to myself &ldquo;Hey, I&rsquo;ll use templates!&rdquo;. Then I had two problems, but the damage was done, I couldn&rsquo;t go back. What kind of contorted device could we implement to make such a devious requirement work? I&rsquo;ll leave you to think it, the answers I came up with next week.</p>