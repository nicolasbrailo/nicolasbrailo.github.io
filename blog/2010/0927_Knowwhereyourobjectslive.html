<h1>Know where your objects live<a name="knowwhereyourobjectslive"></a></h1>
<p>If you work in an environment where memory management is part of your responsibility then you should be aware of the corner cases in which memory management may come and bite you in the ass. Object ownership is one of those areas.</p>
<p>If you are going to take ownership of an object you need to be very explicit about it. A common (and mostly wrong) pattern is taking ownership of an object, by default. Things work great until you end up with a production coredump after trying to free an invalid pointer.</p>
<pre lang="c++" style="display: inline-block; border: 1px solid red;">Foo f1;
Foo <em>f2 = new Foo;
class BadList {
  Foo </em>f1, <em>f2;
  BadList(Foo </em>f1, Foo *f2) :f1(f1), f2(f2) {}
  ~BadList(){ delete f1; delete f2; }
}
</pre>
<p>Seen like that it&rsquo;s more than obvious, but I have seen even experieced programmers fall in this caveat.</p>
<p><strong>Related reading:</strong> <a href="/blog/2010/0601_Ohshitthestack.html">Oh shit the stack</a>.</p>